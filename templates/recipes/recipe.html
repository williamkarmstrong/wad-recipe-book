{% extends 'recipes/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Recipe
{% endblock %}


{% block body_block %}
    {% if recipe %}
        <h1>{{ recipe.title }}</h1>
        <h3>By {{ recipe.author }}</h3>
        <h3>Difficulty: {{ recipe.difficulty }}</h3>
        <img src="{{ recipe.image }}" alt="{{ recipe.title }}">
        <h3>Description</h3>
        <p> {{ recipe.description }} </p>
        <h3>Instructions</h3>
        <p> {{ recipe.instructions }} </p>
        <h3> Rating: {{ recipe.average_rating }}/5</h3>

        {% if user.is_authenticated %}
            <form method="post" action="{% url 'recipes:edit' recipe.id %}">
                {% csrf_token %}
                <label for="rating">Rate this recipe:</label>
                <select name="rating" id="rating">
                    <option value="1">⭐</option>
                    <option value="2">⭐⭐</option>
                    <option value="3">⭐⭐⭐</option>
                    <option value="4">⭐⭐⭐⭐</option>
                    <option value="5">⭐⭐⭐⭐⭐</option>
                </select>
                <button type="submit">Submit Rating</button>
            </form>

            <!-- Save Recipe Form -->
            <form method="post" action="{% url 'recipes:save' recipe.id %}">
                {% csrf_token %}
                <button type="submit">Save to My Recipes</button>
            </form>
        {% else %}
            <p><a href="{% url 'recipes:login' %}">Log in</a> to rate and save recipes.</p>
        {% endif %}

    {% else %}
        The specified recipe does not exist.
    {% endif %}
{% endblock %}
